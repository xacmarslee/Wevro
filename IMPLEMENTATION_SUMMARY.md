# Wevro 收費系統實作總結
## 已完成的修改與下一步

---

## ✅ 已完成的修改（今天）

### 1. AI 模型優化
- ✅ 心智圖擴展：改用 **gpt-4o-mini**（成本降 94%）
- ✅ 字卡定義：改用 **gpt-4o-mini**（成本降 94%）
- ✅ 例句生成：保持 **gpt-4o**（品質優先）
- ✅ 同義詞比較：保持 **gpt-4o**（品質優先）

**成本節省：整體降低 34%**

### 2. 定價調整
- ✅ 同義詞比較：**3 點 → 2 點**
- ✅ 與例句統一定價（成本相近）
- ✅ Pro 訂閱：$6.99/月 → 180 點
- ✅ 點數包：$3.99 (40點) / $9.99 (120點) / $24.99 (300點)

### 3. UI 優化
- ✅ Pricing 頁面：移除多餘 icons
- ✅ 點數包標題：改為 S M L + 禮物 icon
- ✅ 配色優化：灰/主色/金色系
- ✅ 按鈕無紫色邊框
- ✅ 說明區塊改為輕量樣式

### 4. 新增字卡限制
- ✅ 顯示單字計數：0/10
- ✅ 超過 10 個單字時變紅色警告
- ✅ 提交時檢查限制
- ✅ 顯示點數消耗提示：「10 個單字消耗 1 點」

### 5. Footer 導航改進
- ✅ `/pricing` 時 settings 按鈕保持醒目
- ✅ `/account` 時 settings 按鈕保持醒目

### 6. 支付系統方向確認
- ✅ 確認使用 **App 內購**（Apple IAP + Google Play）
- ❌ 移除 Stripe 相關代碼
- ✅ 建立 App 內購實作指南

---

## 📊 最終定價方案

| 方案 | 價格 | 包含內容 |
|------|------|---------|
| **Free** | $0 | 註冊送 30 點 + 每日登入 1 點 |
| **Pro** | **$6.99/月** | 180 點/月 + 無廣告 + 優先處理 |
| **點數包 S** | $3.99 | 40 點 |
| **點數包 M** | $9.99 | 120 點 |
| **點數包 L** | $24.99 | 300 點 |

### 點數消耗（已調整）

| 功能 | 點數消耗 | 成本範圍 | 平均成本 |
|------|---------|---------|---------|
| 心智圖擴展 | **免費** | $0.0002-0.0005 | $0.0003 |
| 字典查詢 | **免費** | $0 | $0 |
| 字卡生成（10張）| **1 點** | $0.0004-0.001 | $0.0006 |
| 例句生成 | **2 點** | $0.015-0.06 | $0.03 |
| 同義詞比較 | **2 點** ⚠️ 已調整 | $0.018-0.065 | $0.035 |

---

## 💰 利潤分析（考慮 App Store 30% 手續費）

### Pro 訂閱（$6.99/月，180點）

| 項目 | 金額 |
|------|------|
| 用戶支付 | $6.99 |
| App Store 手續費（30%）| -$2.10 |
| **您的收入** | **$4.89** |
| 平均成本（70% 使用率）| $1.50 |
| **淨利** | **$3.39** |
| **毛利率** | **69%** ✅ |

**第二年起（15% 手續費）：**
- 您的收入：$5.94
- 淨利：$4.44
- 毛利率：**75%** 🎉

### 點數包利潤（30% 手續費）

| 點數包 | 用戶支付 | 您的收入 | 成本 | 淨利 | 毛利率 |
|--------|---------|---------|------|------|--------|
| S (40點) | $3.99 | $2.79 | $0.48 | $2.31 | **83%** |
| M (120點) | $9.99 | $6.99 | $1.44 | $5.55 | **79%** |
| L (300點) | $24.99 | $17.49 | $3.60 | $13.89 | **79%** |

---

## 📈 12 個月後收入預測（2000 Pro 用戶）

### 考慮手續費的實際收入

| 用戶類型 | 數量 | 用戶支付 | 您的收入 | 成本 | 淨利 |
|---------|------|---------|---------|------|------|
| 免費用戶 | 17,000 | $0 | $0 | $12,240 | -$12,240 |
| Pro 訂閱 | 2,000 | $167,760 | **$117,432** | $36,000 | **+$81,432** |
| 點數包 | 1,500 | $179,820 | **$125,874** | $25,920 | **+$99,954** |
| **總計** | 20,000 | $347,580 | **$243,306** | **$74,160** | **+$169,146** |

**年淨利：$169K**（考慮 30% 手續費後）  
**淨利率：69%**

---

## 🎯 關鍵優勢

### 1. 成本完全可控
- ✅ `max_completion_tokens` 限制最大成本
- ✅ 字卡限制 10 張/次
- ✅ 心智圖節點限制 60 個

### 2. 定價簡單易懂
- ✅ 例句和同義詞統一 2 點
- ✅ 字卡 10 張 = 1 點
- ✅ 低成本功能免費

### 3. 利潤率健康
- ✅ 即使最壞情況仍有 45-52% 毛利
- ✅ 考慮 App Store 手續費後仍有 69% 毛利
- ✅ 第二年手續費降至 15%，利潤更高

---

## 📋 下一步實作

### Phase 1: 配額系統（優先）
1. [ ] 執行 `npm run db:push` 建立配額表
2. [ ] 實作配額中介軟體
3. [ ] 整合到 4 個 AI 端點
4. [ ] 實作新用戶初始化（30 點）
5. [ ] 實作每日登入獎勵（1 點）

### Phase 2: App 內購整合
1. [ ] 註冊 RevenueCat 帳號
2. [ ] 設定 App Store Connect 產品
3. [ ] 設定 Google Play Console 產品
4. [ ] 整合 RevenueCat SDK
5. [ ] 實作購買流程
6. [ ] 實作 Webhook 處理

### Phase 3: 前端完善
1. [ ] 顯示點數餘額
2. [ ] 顯示訂閱狀態
3. [ ] 用量統計
4. [ ] 配額用盡提示

### Phase 4: 測試
1. [ ] 沙盒環境測試
2. [ ] Beta 測試
3. [ ] 修復 Bug

**預計：3-4 週完成**

---

## 🚀 準備好開始實作了嗎？

下一步建議：
1. 先實作配額系統（資料庫 + 中介軟體）
2. 整合到現有 API
3. 測試點數扣除邏輯
4. 再開始 App 內購整合

要現在開始嗎？

