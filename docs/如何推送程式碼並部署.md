# 如何推送程式碼並部署到 Railway

## 🎯 為什麼要 Push？

- ✅ **本地測試** (`localhost:5000`)：使用你本地的伺服器 → 已更新
- ❌ **模擬器測試** (`www.wevro.co`)：使用生產伺服器 → **還沒更新！**

**必須 Push 程式碼，Railway 才會自動部署更新！**

---

## 🚀 推送並部署步驟

### 步驟 1：檢查修改的檔案

```bash
git status
```

你應該看到：
```
modified:   api/lib/create-app.ts
```

### 步驟 2：新增檔案到 Git

```bash
git add api/lib/create-app.ts
```

或者新增所有修改的檔案：
```bash
git add .
```

### 步驟 3：提交修改

```bash
git commit -m "修復 CORS 配置，允許 localhost 來源"
```

### 步驟 4：推送到 GitHub

```bash
git push
```

---

## ⏱️ Railway 自動部署

推送後，Railway 會自動：

1. ✅ **偵測到程式碼變更**（幾秒鐘）
2. ✅ **開始構建**（2-3 分鐘）
   - 執行 `npm install`
   - 執行 `npm run build`
3. ✅ **部署新版本**（1-2 分鐘）
   - 執行 `npm run start`
4. ✅ **服務更新完成**（總共約 3-5 分鐘）

---

## 📊 查看部署狀態

### 方法 1：GitHub 查看

1. 前往 https://github.com/你的用戶名/Wevro
2. 查看最新的 commit
3. 確認程式碼已推送

### 方法 2：Railway Dashboard 查看

1. 前往 https://railway.app
2. 點擊你的專案
3. 查看 "Deployments" 標籤
4. 應該看到新的部署正在進行中

---

## ✅ 驗證部署成功

### 等待部署完成

1. Railway Dashboard → Deployments
2. 等待狀態變成 **"Success"** ✅
3. 點擊部署查看日誌，確認沒有錯誤

### 測試更新

部署完成後，在模擬器中：

1. 開啟應用
2. 測試生成例句功能
3. 測試生成同義字功能
4. **不應該再出現 CORS 錯誤** ✅

---

## 🔍 如果部署失敗

### 查看構建日誌

1. Railway Dashboard → Deployments
2. 點擊失敗的部署
3. 查看 "Build Logs"
4. 找出錯誤原因

### 常見問題

- **構建失敗**：檢查程式碼是否有語法錯誤
- **環境變數缺失**：檢查 Railway 的環境變數設定
- **依賴安裝失敗**：檢查 `package.json` 是否正確

---

## 📝 快速命令參考

```bash
# 查看狀態
git status

# 新增所有修改
git add .

# 提交
git commit -m "修復 CORS 配置"

# 推送
git push

# 查看 Railway 部署（需要瀏覽器）
# https://railway.app
```

---

## ⚠️ 重要提醒

- **本地測試** = 你的電腦上的伺服器 → 已更新 ✅
- **模擬器測試** = 生產伺服器 (`www.wevro.co`) → 需要 Push + 部署 ✅
- **必須 Push 程式碼**，Railway 才會部署新版本！

---

## 🎉 完成！

Push 程式碼後，等待 3-5 分鐘，模擬器就能看到更新了！

