# âœ… 401 éŒ¯èª¤å·²ä¿®å¾©

## å•é¡ŒåŸå› 

é»é€²å»å¿ƒæ™ºåœ–æˆ–å­—å¡æ™‚å‡ºç¾ **401 Unauthorized** éŒ¯èª¤ï¼ŒåŸå› æ˜¯ï¼š

- âœ… åˆ—è¡¨é é¢ï¼ˆ/api/mindmaps, /api/flashcardsï¼‰æœ‰æ­£ç¢ºè¨­å®š Authorization header
- âŒ è©³æƒ…é é¢ï¼ˆ/api/mindmaps/:id, /api/flashcards/:idï¼‰**æ²’æœ‰**è¨­å®š Authorization header

## å·²ä¿®å¾©çš„æª”æ¡ˆ

1. âœ… `client/src/hooks/mindmap/useMindMapPersistence.ts`
   - æ·»åŠ  Firebase token åˆ°è«‹æ±‚ header

2. âœ… `client/src/pages/FlashcardPractice.tsx`
   - æ·»åŠ  Firebase token åˆ°è«‹æ±‚ header

## ğŸš€ è«‹ç«‹å³æ¸¬è©¦

### æ­¥é©Ÿ 1ï¼šç¢ºèªæ‡‰ç”¨æ­£åœ¨é‹è¡Œ

å¦‚æœæ²’æœ‰é‹è¡Œï¼Œè«‹åŸ·è¡Œï¼š
```bash
npm run dev
```

### æ­¥é©Ÿ 2ï¼šé‡æ–°æ•´ç†ç€è¦½å™¨

æŒ‰ **Ctrl+R** æˆ– **F5** é‡æ–°æ•´ç†é é¢

### æ­¥é©Ÿ 3ï¼šæ¸¬è©¦å¿ƒæ™ºåœ–

1. é€²å…¥ã€Œå¿ƒæ™ºåœ–ã€é é¢
2. é»æ“Šä»»æ„ä¸€å€‹å¿ƒæ™ºåœ–
3. **æ‡‰è©²èƒ½å¤ æ­£å¸¸é¡¯ç¤ºå…§å®¹**

**æ§åˆ¶å°æ‡‰é¡¯ç¤ºï¼š**
```
[MindMap] Loading mind map: xxx-xxx-xxx
[MindMap] Load response: {status: 200, ok: true}
[MindMap] Mind map loaded: {...}
```

### æ­¥é©Ÿ 4ï¼šæ¸¬è©¦å­—å¡

1. é€²å…¥ã€Œå­—å¡ã€é é¢
2. é»æ“Šä»»æ„ä¸€å€‹å­—å¡çµ„
3. **æ‡‰è©²èƒ½å¤ æ­£å¸¸é¡¯ç¤ºå­—å¡**

**æ§åˆ¶å°æ‡‰é¡¯ç¤ºï¼š**
```
[FlashcardPractice] Loading deck: xxx-xxx-xxx
[FlashcardPractice] Load response: {status: 200, ok: true}
[FlashcardPractice] Deck loaded: {...}
```

## âœ… æˆåŠŸçš„æ¨™èªŒ

- âœ… ä¸å†å‡ºç¾ 401 Unauthorized éŒ¯èª¤
- âœ… å¿ƒæ™ºåœ–ç·¨è¼¯å™¨é¡¯ç¤ºå…§å®¹
- âœ… å­—å¡é é¢é¡¯ç¤ºæ‰€æœ‰å­—å¡
- âœ… æ§åˆ¶å°é¡¯ç¤º status: 200

## âŒ å¦‚æœé‚„æœ‰å•é¡Œ

è«‹å›å ±ä»¥ä¸‹è³‡è¨Šï¼š

1. **é‚„æœ‰çœ‹åˆ° 401 éŒ¯èª¤å—ï¼Ÿ**
2. **æ§åˆ¶å°çš„å®Œæ•´è¼¸å‡º**
3. **localStorage ä¸­çš„ firebaseToken æ˜¯å¦å­˜åœ¨ï¼Ÿ**
   - åœ¨æ§åˆ¶å°åŸ·è¡Œï¼š`localStorage.getItem('firebaseToken')`
   - å¦‚æœæ˜¯ nullï¼Œè«‹é‡æ–°ç™»å…¥

## ä¸‹ä¸€æ­¥

å¦‚æœé€™æ¬¡ä¿®å¾©æˆåŠŸï¼Œæˆ‘å¯ä»¥ï¼š
1. ç§»é™¤å¤šé¤˜çš„ console.log æ—¥èªŒï¼ˆè®“è¼¸å‡ºæ›´ç°¡æ½”ï¼‰
2. æ·»åŠ æ›´å¥½çš„éŒ¯èª¤è™•ç†ï¼ˆä¾‹å¦‚è‡ªå‹•å°å‘ç™»å…¥é ï¼‰
3. å„ªåŒ–è¼‰å…¥é«”é©—ï¼ˆæ·»åŠ éª¨æ¶å±ï¼‰

è«‹å‘Šè¨´æˆ‘æ¸¬è©¦çµæœï¼ğŸ¯

